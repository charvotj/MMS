% !TeX encoding = UTF-8

\documentclass{protokol}

\usepackage{pdfpages}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{arrows}

%====== Units =====
\usepackage{siunitx}
\sisetup{inter-unit-product =\ensuremath{\cdot}}
\sisetup{group-digits = integer}
\sisetup{output-decimal-marker = {,}}
\sisetup{exponent-product = \ensuremath{\cdot}}
\sisetup{separate-uncertainty}
\sisetup{tight-spacing = false}
%\sisetup{scientific-notation = true}
%\sisetup{round-mode=places,round-precision=4}
%\sisetup{evaluate-expression}


%====== Grafy =====
\usepackage{pgfplots}
\pgfplotsset{width=0.8\linewidth, compat=1.17}
\def\plotcscale{0.8}
\usepackage{pgfplotstable}
\usepackage[figurename=Obr.]{caption} % figure caption rename

%====== Rovnice align block ======
\usepackage{amsmath}
\setlength{\jot}{10pt} % rozestup mezi řádky

\graphicspath{ {./img/} }

%====== Vyplňte údaje ======
\jmeno{Jakub Charvot}
\kod{240844}
\rocnik{3.}
\obor{MET}
\skupina{MET/2}
\spolupracoval{Radek Kučera}

\merenodne{09.04.\ 2024}
\odevzdanodne{16.04.\ 2024}
\nazev{Měření chemických veličin}
\cislo{9} %měřené úlohy

\predmet{Mikrosenzory a mikromechanické systémy}
\ustav{Ústav mikroelektroniky}
\skola{FEKT VUT v~Brně}

\def\para{x+0}
\def\parb{\para-80}


% %citace 
% \usepackage[backend=biber, style=iso-numeric, sortlocale=cs_CZ, autolang=other, language=czech]{biblatex}
% \addbibresource{bibliography.bib}
% \DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}
% hyperlinky
\usepackage[colorlinks]{hyperref}

% odstavce
\usepackage{parskip}

% Bloky kódu
\usepackage{xcolor}

%New colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\usepackage{listings}
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour}, commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}
\lstset{
	inputencoding=utf8,
	extendedchars=true,
	literate={á}{{\'a}}1 {č}{{\v{c}}}1 {ď}{{\v{d}}}1 {é}{{\'e}}1 {ě}{{\v{e}}}1 
           {í}{{\'i}}1 {ň}{{\v{n}}}1 {ó}{{\'o}}1 {ř}{{\v{r}}}1 {š}{{\v{s}}}1 
           {ť}{{\v{t}}}1 {ú}{{\'u}}1 {ů}{{\r{u}}}1 {ý}{{\'y}}1 {ž}{{\v{z}}}1 
           {Á}{{\'A}}1 {Č}{{\v{C}}}1 {Ď}{{\v{D}}}1 {É}{{\'E}}1 {Ě}{{\v{E}}}1 
           {Í}{{\'I}}1 {Ň}{{\v{N}}}1 {Ó}{{\'O}}1 {Ř}{{\v{R}}}1 {Š}{{\v{S}}}1 
           {Ť}{{\v{T}}}1 {Ú}{{\'U}}1 {Ů}{{\r{U}}}1 {Ý}{{\'Y}}1 {Ž}{{\v{Z}}}1,
	style=mystyle
	}

    \lstset{
    language=Python,  % Specify the language for syntax highlighting
    basicstyle=\small\ttfamily,  % Set the basic style for the code
    keywordstyle=\color{blue},  % Set style for keywords
    commentstyle=\color{green!50!black},  % Set style for comments
    stringstyle=\color{orange},  % Set style for strings
    showstringspaces=false,  % Do not show spaces in strings
    breaklines=true,  % Enable line wrapping
    tabsize=4  % Set tab size
}

% Číslování
\pagenumbering{arabic}

% Tabulky
\usepackage{booktabs}

% =========================================
% =============== DOKUMENT ================
% =========================================
\begin{document}
	%====== Vygenerování tabulky ======a
    \maketitle

    \section{Měření a jeho vyhodnocení }
    %     Maximální absolutní chyba použitého senzoru je \(\pm \qty{0.22}{\degree}\), což je údaj platný jak pro měření rotace, tak i náklonu -- jedná se o stále stejný typ měření, pouze využívá jinou osu senzoru. 

    \begin{table}[ht!]
        \caption{Měření koncentrace acetonu.}
        \def\arraystretch{1.2}
        \centering
        \input{tables/hodnoty.tex}
    \end{table}
    
    \subsubsection{Příklad výpočtu}
    
    \[
        C_{vypoctena} =  \frac{\num{22.4}\rho_{aceton}  V_{aceton}  }{M_{aceton} V_{nadoba} }\cdot 10^6
    \]
    Dosazení pro poslední řádek tabulky:
    \[
        C_{vypoctena} =  \frac{\num{22.4}\cdot \num{0.79}\cdot \num{10e-6}}{\num{58} \cdot  (\pi \cdot \num{0.7}^2) }\cdot 10^6
    \]
    \[
        C_{vypoctena} \doteq \qty{0.991}{ppm}
    \]
    \begin{figure}[h!]
        \centering
        \includegraphics[width=0.8\textwidth]{img/konc-mer.pdf}
        \caption{Závislost měřené hodnoty na objemu přidaného acetonu.}
        \label{fig:img/graf-1}
    \end{figure}

    \begin{figure}[h!]
        \centering
        \includegraphics[width=0.8\textwidth]{img/konc-kalib.pdf}
        \caption{Kalibrační křivka měření koncentrace.}
        \label{fig:img/graf-2}
    \end{figure}


    \clearpage
    \subsection{Zdrojový kód}
    \lstinputlisting[caption={Použitý kód v jazyce Python}, label=lst:example]{data/_code.py}

        \clearpage
        \section*{Závěr}
            Pro dosažení přesnějších výsledků jsme kód dodaný k úloze rozšířili o průměrování měřených hodnot. Offset senzoru jsme v prázdné otevřené nádobě měřili stokrát a získali  jsme tím opravdu o řád lepší hodnotu (následná měření se skutečně pohybovala kolem nuly). Hodnoty měřené dále jsme už průměrovali pouze z deseti hodnot. Kalibrační křivka měření (viz Obr.~\ref{fig:img/graf-2}) má přibližně lineární průbeh v celém měřeném rozsahu, ovšem samotné hodnoty jsou odlišné o několik řádů. Pokud bychom chtěli tímto senzorem měřit, je potřeba hodnoty přepočítat pomocí přiložené rovnice přímky. Druhou možností je úprava vzorce ve zdrojovém kódu (který jsme k úloze dostali), ten obsahuje dvě konstanty bez bližšího popisu a je možné, že byly zvoleny špatně.

            Je nutné podotknout, že náš pokus o zpřesnění hodnot průměrováním byl poněkud zbytečný, protože použitý způsob kalibrace sám o sobě není příliš přesný -- každým otevřením nádoby část plynu unikne, tím vzniká náhodná chyba, které postupem času roste. Také rozložení plynu v nádobě není homogenní a měřená hodnota se v čase mění. 

            Na závěr jsme zkoušeli také odezvu senzoru na ethanol. Pro dvě měřené koncentrace vycházela přibližně šestkrát menší než odezva acetonu.
\end{document}
